<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UFO Map — Minimal Sanity Test</title>

  <!-- Vega libs -->
  <script src="https://unpkg.com/vega@5"></script>
  <script src="https://unpkg.com/vega-lite@5"></script>
  <script src="https://unpkg.com/vega-embed@6"></script>

  <style>
    body{margin:0;background:#0f172a;color:#e5e7eb;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    .wrap{max-width:980px;margin:24px auto;padding:0 16px}
    h1{font-weight:700;margin:0 0 8px}
    #vis{min-height:440px;border:1px solid #1f2937;border-radius:12px;overflow:hidden}
    p{color:#cbd5e1}
    .ok{color:#22c55e}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>USA map sanity check</h1>
    <p>If you see a graticule grid and three circles (LA/NYC/Chicago), Vega is working ✅. If this is blank, something is blocking the libraries.</p>
    <div id="vis"></div>
  </div>

  <script>
    // ZERO external datasets — graticule + inline test points only.
    const spec = {
      $schema: "https://vega.github.io/schema/vega-lite/v5.json",
      width: 960, height: 420,
      projection: { type: "albersUsa" },
      layer: [
        {
          // light graticule so we can see the projection works
          data: { graticule: true },
          mark: { type: "geoshape", stroke: "#334155", strokeWidth: 1, fill: null }
        },
        {
          // three inline test points
          data: { values: [
            { city:"Los Angeles",  state:"CA", lat:34.05, lon:-118.24, count:50 },
            { city:"New York City",state:"NY", lat:40.71, lon:-74.00,  count:80 },
            { city:"Chicago",      state:"IL", lat:41.88, lon:-87.63,  count:65 }
          ]},
          mark: { type: "circle", opacity: 0.95, stroke:"#0b1220", strokeWidth:0.6 },
          encoding: {
            longitude: { field: "lon", type: "quantitative" },
            latitude:  { field: "lat", type: "quantitative" },
            size:      { field: "count", type: "quantitative", scale: { range: [80, 900] }, title: "Sightings" },
            color:     { field: "city", type: "nominal",
                         scale: { range: ["#06b6d4","#a78bfa","#f59e0b"] },
                         legend: { orient: "bottom", direction:"horizontal" } },
            tooltip:   [ {field:"city"}, {field:"state"}, {field:"count", type:"quantitative"} ]
          }
        }
      ],
      config: { background: null }
    };

    vegaEmbed("#vis", spec, { actions:false })
      .then(() => console.log("%cVega render OK","color:#22c55e"))
      .catch(err => { console.error("Vega error:", err); alert("Vega failed to render — open console for details."); });
  </script>
</body>
</html>
